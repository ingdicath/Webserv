# TESTER WEBSERV
# Setup the configuration file as follow:
#   - / must answer to GET request ONLY
#   - /put_test/* must answer to PUT request and save files to a directory of your choice
#   - any file with .bla as extension must answer to POST request by calling the cgi_test executable
#   - /post_body must answer anything to POST request with a maxBody of 100
#   - /directory/ must answer to GET request and the root of it would be the repository 
#     YoupiBanane and if no file are requested, it should search for youpi.bad_extension files

server {
    port                    8085;
    host                    localhost;
	server_name             youpi;

	root                    /YoupiBanane;
	index                   index.html;

	allow_methods           GET;

	location /put_test/* {
		accepted_methods    PUT;
		root                ./YoupiBanane/put_here
		alias
	}

	location /post_body {
		accepted_methods        POST;
		client_body_buffer_size 100;
	}

	location /directory/ {
		alias
		allow_methods           GET;
		root                    YoupiBanane/;
		index                   youpi.bad_extension;

		location *.bla {
			allow_methods       GET POST;
			cgi_pass            test_mac/macos_cgi_tester;
		}
	}

	location *.bla {
		allow_methods POST
		cgi_pass test_mac/macos_cgi_tester
	}
}
